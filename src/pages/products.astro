---
import Layout from '../layouts/Layout.astro'
import ProductCard from '../components/ProductCard'
import Visible from '../components/Visible'
import { IProduct } from '../types'

const response = await fetch('https://fakestoreapi.com/products')
const products = (await response.json()) as IProduct[]
---

<Layout title="Products">
  <h1 class="text-2xl font-bold">Products page</h1>

  {products.map((prod) => <ProductCard client:load product={prod} />)}

  <Visible client:visible />
</Layout>
